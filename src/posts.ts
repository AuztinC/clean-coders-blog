export type Post = {
  title: string
  date: string
  blog: string
}

export const postsIndex: Record<string, string> = {
  "4-1-2025": "2025-04-01-day-one-blast-off.md",
  "4-2-2025": "2025-04-02-day-two-diving-in.md",
  "4-3-2025": "2025-04-03-day-three-taking-a-closer-look.md",
  "4-4-2025": "2025-04-04-day-four-a-task-for-the-tin-man.md",
  "4-7-2025": "2025-04-07-figuring-it-out.md",
  "4-8-2025": "2025-04-08-a-day-with-uncle-bob.md",
  "4-9-2025": "2025-04-09-if-you-plan-it-they-will-meet.md",
  "4-10-2025": "2025-04-10-the-legend-himself.md",
  "4-11-2025": "2025-04-11-repition-young-grasshopper.md",
  "4-14-2025": "2025-04-14-racecar-level-rotor-oh-my.md",
  "4-15-2025": "2025-04-15-re-factor.md",
  "4-16-2025": "2025-04-16-buckle-down.md",
  "4-17-2025": "2025-04-17-rehearse-the-verse.md",
  "4-18-2025": "2025-04-18-srp.md",
  "4-21-2025": "2025-04-21-iterate.md",
  "4-22-2025": "2025-04-22-zone-of-pain-or-uselessness.md",
  "4-23-2025": "2025-04-23-thrill-rides.md",
  "4-24-2025": "2025-04-24-cracking-the-code.md",
  "4-25-2025": "2025-04-25-learn-and-lunch.md",
  "4-28-2025": "2025-04-28-minimax-to-the-max.md",
  "4-29-2025": "2025-04-29-refactor-refactor.md",
  "4-30-2025": "2025-04-30-getting-the-rythm.md",
  "5-1-2025": "2025-05-01-clean-tests.md",
  "5-2-2025": "2025-05-02-liftoff-with-liskov.md",
  "5-5-2025": "2025-05-05-rodney-mullen-monday.md",
  "5-6-2025": "2025-05-06-rinse-repeat.md",
  "5-7-2025": "2025-05-07-rough-estimation.md",
  "5-8-2025": "2025-05-08-to-refactor-or-to-transform.md",
  "5-9-2025": "2025-05-09-first-week-as-curator.md",
  "5-12-2025": "2025-05-12-move-over-monday.md",
  "5-13-2025": "2025-05-13-the-power-of-the-stub.md",
  "5-14-2025": "2025-05-14-remove-that-abstraction.md",
  "5-15-2025": "2025-05-15-the-game-of-life.md",
  "5-16-2025": "2025-05-16-improvement.md",
  "5-19-2025": "2025-05-19-the-power-of-cache.md",
  "5-20-2025": "2025-05-20-the-speed-of-light.md",
  "5-21-2025": "2025-05-21-disco-ipm.md",
  "5-22-2025": "2025-05-22-design-patterns-which-to-present.md",
  "5-23-25": "2025-05-23-youtube-star.md",
  "5-27-25": "2025-05-27-heuristics.md",
  "5-28-25": "2025-05-28-iterate-and-meditate.md",
  "5-29-25": "2025-05-29-lets-go-bowling-again.md",
  "5-30-25": "2025-05-30-a-commanding-friday.md",
  "6-2-25": "2025-06-02-persistence.md",
  "6-3-25": "2025-06-03-lets-watch-an-instant-replay.md",
  "6-4-25": "2025-06-04-making-it-right.md",
  "6-5-25": "2025-06-05-getting-adapted.md",
  "6-6-25": "2025-06-06-refactoring-is-easy.md",
  "6-9-25": "2025-06-09-party-with-postgres.md",
  "6-10-25": "2025-06-10-postrgres-production.md",
  "6-11-25": "2025-06-11-positively-javariffic.md",
  "6-12-25": "2025-06-12-hashing-it-out.md",
  "6-13-25": "2025-06-13-data-structures.md",
  "6-16-25": "2025-06-16-blowing-a-bubble.md",
  "6-17-25": "2025-06-17-sort-it-out.md",
  "6-18-25": "2025-06-18-gui-time.md",
  "6-19-25": "2025-06-19-component-design.md",
  "6-20-25": "2025-06-20-learning-to-lunch.md",
  "6-23-25": "2025-06-23-learning-to-draw.md",
  "6-24-25": "2025-06-24-picturing-it-all.md",
  "6-25-25": "2025-06-25-the-big-oops.md",
  "6-26-25": "2025-06-26-decorating-the-future.md",
  "6-27-25": "2025-06-27-holy-canalee.md",
  "6-30-25": "2025-06-30-making-it-visual.md",
  "7-1-25": "2025-07-01-making-it-right.md",
  "7-2-25": "2025-07-02-learning-to-fail.md",
  "7-3-25": "2025-07-03-up-hill.md",
  "7-7-25": "2025-07-07-clear-out.md",
  "7-8-25": "2025-07-08-feeling-comfortable-again.md",
  "7-9-25": "2025-07-09-build-a-whaa.md",
  "7-10-25": "2025-07-10-the-request.md",
  "7-11-25": "2025-07-11-headers.md",
  "7-14-25": "2025-07-14-wrapped-up.md",
  "7-15-25": "2025-07-15-becoming-a-server.md",
  "7-16-25": "2025-07-16-delivering.md",
  "7-17-25": "2025-07-17-multipart.md",
  "7-18-25": "2025-07-18-take-a-guess.md",
  "7-21-25": "2025-07-21-hello-ping.md",
  "7-22-25": "2025-07-22-dip-in-action.md",
  "7-23-25": "2025-07-23-welcome-back-tic-tac.md",
  "7-24-25": "2025-07-24-proxies.md",
  "7-25-25": "2025-07-25-connecting-the-pieces.md",
  "7-28-25": "2025-07-28-conquering-the-web.md",
  "7-29-25": "2025-07-29-accepting-the-cookie.md",
  "7-30-25": "2025-07-30-sliding-into-home.md",
  "7-31-25": "2025-07-31-clojurescript.md",
  "8-1-25": "2025-08-01-files.md",
  "8-4-25": "2025-08-04-game-over-again.md",
  "8-5-25": "2025-08-05-lets-play-tic-tac-toe.md",
  "8-6-25": "2025-08-06-the-strategy.md",
  "8-7-25": "2025-08-07-finite-state-machines.md",
  "8-8-2025": "2025-08-08-sitar-friday.md",
  "8-11-25": "2025-08-11-visitors!.md",
  "2-3-2026": "2026-02-03-ttt-in-wow.md",
  "2-5-2026": "2026-02-05-csharp.md"
}

export const parseMarkdown = (content: string): Post => {
  const match = content.match(/^---\s*\n([\s\S]*?)\n---\s*\n?([\s\S]*)$/)
  if (!match) {
    return { title: "", date: "", blog: content.trim() }
  }

  const [, frontmatter, body] = match
  const meta: Record<string, string> = {}

  frontmatter.split("\n").forEach((line) => {
    const [key, ...rest] = line.split(":")
    if (!key || rest.length === 0) return
    const value = rest.join(":").trim().replace(/^"|"$/g, "")
    meta[key.trim()] = value
  })

  return {
    title: meta.title ?? "",
    date: meta.date ?? "",
    blog: body.trim(),
  }
}
